{"ast":null,"code":"const key = process.env.REACT_APP_OPEN_WEATHER_API_KEY;\n\nif (key === undefined) {\n  throw new Error('No Open Weather API Key defined - ensure you set a variable called REACT_APP_OPEN_WEATHER_API_KEY');\n}\n\nconst keyQuery = `appid=${key}`;\nconst server = 'http://api.openweathermap.org/data/2.5';\nexport async function searchLocation(term) {\n  const result = await fetch(`${server}/weather?q=${term}&${keyQuery}`);\n  if (result.status === 404) return undefined;\n  if (result.status !== 200) throw new Error('Failed to read location data');\n  return await result.json();\n}\nexport async function readWeather(locationId) {\n  const current = await fetch(`${server}/weather?id=${locationId}&${keyQuery}&units=metric`);\n  if (current.status !== 200) throw new Error('Failed to read location data');\n  return await current.json();\n}\nexport async function readForecast(locationId) {\n  const forecast = await fetch(`${server}/forecast?id=${locationId}&${keyQuery}&units=metric&cnt=8`);\n  if (forecast.status !== 200) throw new Error('Failed to read location data');\n  return (await forecast.json()).list;\n}\nexport function getIconUrl(code) {\n  return `http://openweathermap.org/img/wn/${code}.png`;\n}","map":{"version":3,"sources":["/Users/sagar/Desktop/react-app-1/src/services/WeatherService.ts"],"names":["key","process","env","REACT_APP_OPEN_WEATHER_API_KEY","undefined","Error","keyQuery","server","searchLocation","term","result","fetch","status","json","readWeather","locationId","current","readForecast","forecast","list","getIconUrl","code"],"mappings":"AAEA,MAAMA,GAAW,GAAGC,OAAO,CAACC,GAAR,CAAYC,8BAAhC;;AACA,IAAIH,GAAG,KAAKI,SAAZ,EAAuB;AACrB,QAAM,IAAIC,KAAJ,CAAU,mGAAV,CAAN;AACD;;AAED,MAAMC,QAAQ,GAAI,SAAQN,GAAI,EAA9B;AACA,MAAMO,MAAM,GAAG,wCAAf;AAEA,OAAO,eAAeC,cAAf,CAA8BC,IAA9B,EAAkF;AACrF,QAAMC,MAAM,GAAG,MAAMC,KAAK,CAAE,GAAEJ,MAAO,cAAaE,IAAK,IAAGH,QAAS,EAAzC,CAA1B;AAEA,MAAII,MAAM,CAACE,MAAP,KAAkB,GAAtB,EAA2B,OAAOR,SAAP;AAC3B,MAAIM,MAAM,CAACE,MAAP,KAAkB,GAAtB,EAA2B,MAAM,IAAIP,KAAJ,CAAU,8BAAV,CAAN;AAE3B,SAAO,MAAMK,MAAM,CAACG,IAAP,EAAb;AACH;AACD,OAAO,eAAeC,WAAf,CAA2BC,UAA3B,EAAiE;AACpE,QAAMC,OAAO,GAAG,MAAML,KAAK,CAAE,GAAEJ,MAAO,eAAcQ,UAAW,IAAGT,QAAS,eAAhD,CAA3B;AAEA,MAAIU,OAAO,CAACJ,MAAR,KAAmB,GAAvB,EAA4B,MAAM,IAAIP,KAAJ,CAAU,8BAAV,CAAN;AAE5B,SAAO,MAAMW,OAAO,CAACH,IAAR,EAAb;AACH;AACD,OAAO,eAAeI,YAAf,CAA4BF,UAA5B,EAAoE;AACvE,QAAMG,QAAQ,GAAG,MAAMP,KAAK,CAAE,GAAEJ,MAAO,gBAAeQ,UAAW,IAAGT,QAAS,qBAAjD,CAA5B;AAEA,MAAIY,QAAQ,CAACN,MAAT,KAAoB,GAAxB,EAA6B,MAAM,IAAIP,KAAJ,CAAU,8BAAV,CAAN;AAE7B,SAAO,CAAC,MAAMa,QAAQ,CAACL,IAAT,EAAP,EAAwBM,IAA/B;AACH;AACD,OAAO,SAASC,UAAT,CAAoBC,IAApB,EAA0C;AAC7C,SAAQ,oCAAmCA,IAAK,MAAhD;AACH","sourcesContent":["import {Weather, WeatherLocation} from '../model/Weather';\n\nconst key: string = process.env.REACT_APP_OPEN_WEATHER_API_KEY as string;\nif (key === undefined) {\n  throw new Error('No Open Weather API Key defined - ensure you set a variable called REACT_APP_OPEN_WEATHER_API_KEY')\n}\n\nconst keyQuery = `appid=${key}`\nconst server = 'http://api.openweathermap.org/data/2.5';\n\nexport async function searchLocation(term: string): Promise<WeatherLocation | undefined> {\n    const result = await fetch(`${server}/weather?q=${term}&${keyQuery}`);\n  \n    if (result.status === 404) return undefined;\n    if (result.status !== 200) throw new Error('Failed to read location data');\n  \n    return await result.json();\n}\nexport async function readWeather(locationId: number): Promise<Weather> {\n    const current = await fetch(`${server}/weather?id=${locationId}&${keyQuery}&units=metric`);\n  \n    if (current.status !== 200) throw new Error('Failed to read location data');\n  \n    return await current.json();\n}\nexport async function readForecast(locationId: number): Promise<Weather[]> {\n    const forecast = await fetch(`${server}/forecast?id=${locationId}&${keyQuery}&units=metric&cnt=8`);\n  \n    if (forecast.status !== 200) throw new Error('Failed to read location data');\n  \n    return (await forecast.json()).list;\n}\nexport function getIconUrl(code: string): string {\n    return `http://openweathermap.org/img/wn/${code}.png`;\n}"]},"metadata":{},"sourceType":"module"}